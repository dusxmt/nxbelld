.de Vb \" Begin verbatim text (stolen from man files generated by pod2man)
. Bd -literal -offset 4n
..
.de Ve \" End verbatim text
. Ed
. Pp
..
.
.
.Dd May 28, 2016
.Os X "Version 11"
.Dt nxbelld 1
.
.
.Sh NAME
.
.
.Nm nxbelld
.Nd X daemon that performs an action every time the bell is rung
.
.Sh SYNOPSIS
.
.Nm
.Op Fl bDT
.Op Fl t Ar delay
.Op Fl F Ar freq
.Op Fl v Ar vol
.Op Fl d Ar duration
.
.Nm
.Op Fl bDTc
.Op Fl t Ar delay
.Fl f Ar file
.
.Nm
.Op Fl bDT
.Op Fl t Ar delay
.Fl e Ar cmd
.
.Nm
.Fl h
.
.Sh DESCRIPTION
.
.
.Bd -filled
.Nm
is a tiny utility to aid people who either don't like the default PC speaker beep, or use a sound driver that doesn't have support for the PC speaker (e.g. the AD1981 chipset in the snd_hda_intel ALSA driver, as of 2008-04-06).
.
.Pp
.
.Nm
performs a given action every time the X bell is rung. The actions
.Nm
can currently perform include running a specified program, emulating the PC speaker beep using your sound card (default), or playing a PCM encoded WAVE file.
.
.Pp
.
The actions involving the sound card are only available if
.Nm
is compiled with sound support, which requires a supported sound API.
.
.Pp
.
Currently, the following sound APIs are supported:
.
.Pp
.Vb
ALSA    (default on most Linux distributions)
OSS     (default on several BSD systems, including FreeBSD)
soundio (default on OpenBSD)
.Ve
.Pp
.Pp
To convert your favorite sound files to a PCM encoded WAVE file, use:
.Pp
.Vb
ffmpeg -i <file> -vn -acodec pcm_s16le out.wav
.Ve
.Pp
.
.Pp
.Nm
can also throttle the bell if it is rung too often (e.g. some terminal program goes crazy), and/or disable the system's audible bell (so that you don't get the annoying PC speaker beep in addition to your
.Nm
action).
.
.Ed
.
.
.Sh OPTIONS
.Ss Common Options
.
.Bd -filled
.Bl -tag -width 4n
.
.It Fl b, -background
Run
.Nm
in the background.
.
.It Fl D, -keep-abell
Don't disable the system audio bell on startup. The default is to disable the audio bell; that way, if you have a working PC speaker, you won't hear two beeps. You can always enable / disable the bell using
.Xr xset 1
.
.It Fl t, -throttle Ar interval
.
Interval (ms) during which subsequent bells are throttled.
.
.It Fl T, -test-bell
Ring a test bell on startup. If you're experimenting with your PC speaker values, then you can try something like:
.Vb
pkill nxbelld; nxbelld -TF1000 -v100 -d200 &
.Ve
and play with the numbers until you're satisfied with the sound.
.
.It Fl h, -help
Print the help screen and exit.
.
.El
.Ed
.Ss Options to play an audio file
.Bd -filled
.Bl -tag -width 4n
.
.It Fl c, -cache
Cache the audio file in memory (less lags, especially when the disk is busy).
.
.It Fl f, -wave-file Ar file
Name of file to play when the bell is rung. The file must be a PCM encoded wave file.
.
.El
.Ed
.Ss Options to produce a beep
.Bl -tag -width 4n
.
.It Fl i, -sine
Generate a sine wave beep.
.
.It Fl q, -square
Generate a square wave beep.
.
.El
.Bd -filled
The default values of the following three options are from the bell parameters of the server. (These can be set via
.Xr xset 1
for instance). These options are only read on startup, and not every time the bell is played, so if you change your bell parameters, you should restart
.Nm
for the change to take effect.
.Bl -tag -width 4n
.
.It Fl d, -duration Ar duration
Duration of the beep in milliseconds.
.
.It Fl F, -frequency Ar freq
Frequency of the beep in hertz.
.
.It Fl v, -volume Ar vol
Volume of the beep (0 -- 100).
.
.El
.Ed
.
.Ss Options to execute an external command
.Bd -filled
.Bl -tag -width 4n
.
.It Fl e, -command Ar cmd
Command to execute when the bell is rung.
.
.El
.Ed
.
.Sh COMPATIBILITY WITH GAUTAM IYER'S XBELLD
.
.
.Bd -filled
.Nm
should mostly be backwards compatible with xbelld, with the only exception being the -e (--command) option. In Gautam Iyer's xbelld, it has to be the last option, and all following command line arguments are considered to be the external command to execute once the bell is rung.
.Pp
.Nm
accepts a single string argument for the --command option, and doesn't impose a limitation on where it has to be on the command line. This means that if the external command consists of several whitespace-separated words, it has to be quoted and properly escaped.
.ed
.
.Sh BUGS
.
.
.Bd -filled
When using soundio, the beeps are slightly shorter than the specified beep duration. Beeps of 120 ms or shorter don't get played at all. This can be worked around simply by specifying a longer duration using the --duration option.
.ed
.Sh SEE ALSO
.
.
.Bd -filled
.Ad https://github.com/dusxmt/nxbelld/
.Ed
.
.
.Sh AUTHORS
.An "Gautam Iyer" < Ns Mt gi1242@users.sourceforge.net Ns >
.An "Marek Benc" < Ns Mt dusxmt@gmx.com Ns >
